!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["react-keyed-file-browser"]=t():e["react-keyed-file-browser"]=t()}(window,(function(){return function(e){function t(t){for(var n,o,i=t[0],a=t[1],l=0,s=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&s.push(r[o][0]),r[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);s.length;)s.shift()()}var n={},r={0:0};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var i=window.webpackJsonpreact_keyed_file_browser=window.webpackJsonpreact_keyed_file_browser||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=a;return o(o.s=6)}([function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("react-dnd")},function(e,t){e.exports=require("react-dnd-html5-backend")},function(e,t){e.exports=require("classnames")},function(e,t,n){"use strict";n.r(t),n.d(t,"RawFileBrowser",(function(){return Pn})),n.d(t,"BaseFile",(function(){return se})),n.d(t,"BaseFileConnectors",(function(){return ce})),n.d(t,"BaseFolder",(function(){return ut})),n.d(t,"BaseFolderConnectors",(function(){return st})),n.d(t,"Headers",(function(){return a})),n.d(t,"FileRenderers",(function(){return l})),n.d(t,"FolderRenderers",(function(){return c})),n.d(t,"Details",(function(){return r})),n.d(t,"Filters",(function(){return o})),n.d(t,"Groupers",(function(){return s})),n.d(t,"Sorters",(function(){return u})),n.d(t,"Icons",(function(){return f})),n.d(t,"Utils",(function(){return i}));var r={};n.r(r),n.d(r,"DefaultDetail",(function(){return E}));var o={};n.r(o),n.d(o,"DefaultFilter",(function(){return M}));var i={};n.r(i),n.d(i,"isFolder",(function(){return B})),n.d(i,"moveFilesAndFolders",(function(){return L}));var a={};n.r(a),n.d(a,"TableHeader",(function(){return we}));var l={};n.r(l),n.d(l,"ListThumbnailFile",(function(){return Ae})),n.d(l,"SimpleListThumbnailFile",(function(){return We})),n.d(l,"TableFile",(function(){return Ze})),n.d(l,"RawListThumbnailFile",(function(){return Ne})),n.d(l,"RawTableFile",(function(){return Xe}));var c={};n.r(c),n.d(c,"ListThumbnailFolder",(function(){return St})),n.d(c,"TableFolder",(function(){return xt})),n.d(c,"RawListThumbnailFolder",(function(){return Pt})),n.d(c,"RawTableFolder",(function(){return Tt}));var s={};n.r(s),n.d(s,"GroupByFolder",(function(){return Wt})),n.d(s,"GroupByModifiedRelative",(function(){return $t}));var u={};n.r(u),n.d(u,"SortByName",(function(){return Qt})),n.d(u,"SortByModified",(function(){return Xt}));var f={};n.r(f),n.d(f,"FontAwesome",(function(){return En}));var p=n(0),d=n.n(p),m=n(1),h=n.n(m),y=n(4),b=n.n(y),g=n(3);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,r,o=D(i);function i(){var e;w(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleCloseClick=function(t){t&&t.preventDefault(),e.props.close()},e}return t=i,(n=[{key:"render",value:function(){var e=this.props.file.key.split("/");e=e.length?e[e.length-1]:"";var t=this.props.messages;return h.a.createElement("div",null,h.a.createElement("h2",null,t.item_details),h.a.createElement("dl",null,h.a.createElement("dt",null,t.key),h.a.createElement("dd",null,this.props.file.key),h.a.createElement("dt",null,t.name),h.a.createElement("dd",null,e)),h.a.createElement("a",{href:"#",onClick:this.handleCloseClick},t.close))}}])&&F(t.prototype,n),r&&F(t,r),i}(h.a.Component);R.propTypes={file:d.a.shape({key:d.a.string.isRequired,name:d.a.string.isRequired,extension:d.a.string.isRequired,url:d.a.string}).isRequired,close:d.a.func,messages:d.a.object};var E=R;function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(i,e);var t,n,r,o=N(i);function i(){var e;k(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).handleFilterChange=function(t){var n=e.filterRef.value;e.props.updateFilter(n)},e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props.messages;return h.a.createElement("input",{ref:function(t){e.filterRef=t},type:"search",placeholder:t.filter_files,value:this.props.value,onChange:this.handleFilterChange})}}])&&C(t.prototype,n),r&&C(t,r),i}(h.a.Component);x.propTypes={value:d.a.string.isRequired,updateFilter:d.a.func,messages:d.a.object};var M=x,K=n(5),I=n.n(K);function B(e){return e.key.endsWith("/")}function L(e,t,n){if(t.didDrop()){var r=t.getDropResult(),o=[],i=[];e.browserProps.selection.forEach((function(e){"/"===e[e.length-1]?o.push(e):i.push(e)})),e.browserProps.openFolder(r.path),o.forEach((function(t){var n=t,o=n.split("/"),i=o[o.length-2],a="".concat(r.path).concat(i,"/");a.substr(0,n.length)!==n&&a!==n&&e.browserProps.moveFolder&&e.browserProps.moveFolder(n,a)})),i.forEach((function(t){var n=t,o=n.split("/"),i=o[o.length-1],a="".concat(r.path).concat(i);a!==n&&e.browserProps.moveFile&&e.browserProps.moveFile(n,a)}))}}function q(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=W(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}for(var G={},V=0,$=Object.entries({Archive:["zip","rar","7z"],Audio:["mp3","ogg","wav","aac"],Excel:["xls","xlsx"],Image:["jpg","jpeg","png","bmp"],PDF:["pdf"],PowerPoint:["ppt","pptx"],Text:["txt"],Video:["mp4","flv","avi","wmv","mov"],Word:["doc","docx"],Code:["js"]});V<$.length;V++){var H,Y=z($[V],2),J=Y[0],Q=q(Y[1]);try{for(Q.s();!(H=Q.n()).done;){var X=H.value;G[X]=J}}catch(e){Q.e(e)}finally{Q.f()}}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var o=ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(i,e);var t,n,r,o=re(i);function i(){var e;ee(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={newName:e.getName()},e.handleFileClick=function(t){t&&t.preventDefault(),e.props.browserProps.preview({url:e.props.url,name:e.getName(),key:e.props.fileKey,extension:e.getExtension()})},e.handleItemClick=function(t){t.stopPropagation(),e.props.browserProps.select(e.props.fileKey,"file",t.ctrlKey||t.metaKey,t.shiftKey)},e.handleItemDoubleClick=function(t){t.stopPropagation(),e.handleFileClick()},e.handleRenameClick=function(t){e.props.browserProps.renameFile&&e.props.browserProps.beginAction("rename",e.props.fileKey)},e.handleNewNameChange=function(t){var n=e.newNameRef.value;e.setState({newName:n})},e.handleRenameSubmit=function(t){if(t&&t.preventDefault(),e.props.browserProps.renameFile){var n=e.state.newName.trim();if(0!==n.length){if(!["/","\\"].some((function(e){return-1!==n.indexOf(e)}))){var r=n,o=e.props.fileKey.lastIndexOf("/");-1!==o&&(r="".concat(e.props.fileKey.substr(0,o),"/").concat(n)),e.props.browserProps.renameFile(e.props.fileKey,r)}}}},e.handleDeleteClick=function(t){e.props.browserProps.deleteFile&&e.props.browserProps.beginAction("delete",e.props.fileKey)},e.handleDeleteSubmit=function(t){t.preventDefault(),e.props.browserProps.deleteFile&&e.props.browserProps.deleteFile(e.props.browserProps.actionTargets)},e.handleCancelEdit=function(t){e.props.browserProps.endAction()},e}return t=i,(n=[{key:"componentDidUpdate",value:function(e,t){var n=this;!e.isRenaming&&this.props.isRenaming&&window.requestAnimationFrame((function(){var e=n.newNameRef.value,t=e.lastIndexOf(".");n.newNameRef.setSelectionRange(0,t||e.length),n.newNameRef.focus()}))}},{key:"getName",value:function(){var e=this.props.newKey||this.props.fileKey,t=e.lastIndexOf("/");return-1!==t&&(e=e.substr(t+1)),e}},{key:"getExtension",value:function(){var e=this.props.fileKey.split(".");return e[e.length-1].toLowerCase().trim()}},{key:"getFileType",value:function(){return G[this.getExtension()]||"File"}},{key:"connectDND",value:function(e){var t=this.props.isDragging||this.props.action;return"function"!=typeof this.props.browserProps.moveFile||t||this.props.isRenaming||(e=this.props.connectDragSource(e)),"function"!=typeof this.props.browserProps.createFiles&&"function"!=typeof this.props.browserProps.moveFile&&"function"!=typeof this.props.browserProps.moveFolder||(e=this.props.connectDropTarget(e)),e}}])&&te(t.prototype,n),r&&te(t,r),i}(h.a.Component);ae.propTypes={fileKey:d.a.string,url:d.a.string,newKey:d.a.string,isRenaming:d.a.bool,connectDragSource:d.a.func,connectDropTarget:d.a.func,isDragging:d.a.bool,action:d.a.string,browserProps:d.a.shape({icons:d.a.object,select:d.a.func,beginAction:d.a.func,endAction:d.a.func,preview:d.a.func,createFiles:d.a.func,moveFile:d.a.func,moveFolder:d.a.func,renameFile:d.a.func,deleteFile:d.a.func,messages:d.a.object})};var le,ce={dragSource:{beginDrag:function(e){return e.browserProps.selection.length&&e.browserProps.selection.includes(e.fileKey)||e.browserProps.select(e.fileKey,"file"),{key:e.fileKey}},endDrag:function(e,t,n){L(e,t)}},dragCollect:function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}},targetSource:{drop:function(e,t){if(!t.didDrop()){var n=e.newKey||e.fileKey,r=n.lastIndexOf("/"),o=-1!==r?n.substr(0,r+1):"",i=t.getItem();return i.files&&e.browserProps.createFiles&&e.browserProps.createFiles(i.files,o),{path:o}}}},targetCollect:function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0})}}},se=ae;function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be(e);if(t){var o=be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ge=function(e){de(i,e);var t,n,r,o=he(i);function i(){return fe(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"handleHeaderClick",value:function(e){this.props.select(this.props.fileKey)}},{key:"render",value:function(){var e=this.props.messages,t=h.a.createElement("tr",{className:I()("folder",{dragover:this.props.isOver,selected:this.props.isSelected})},h.a.createElement("th",null,e.file),h.a.createElement("th",{className:"size"},e.size),h.a.createElement("th",{className:"modified"},e.last_modified));return"function"==typeof this.props.browserProps.createFiles||"function"==typeof this.props.browserProps.moveFile||"function"==typeof this.props.browserProps.moveFolder?this.props.connectDropTarget(t):t}}])&&pe(t.prototype,n),r&&pe(t,r),i}(h.a.Component);ge.propTypes={select:d.a.func,fileKey:d.a.string,connectDropTarget:d.a.func,isOver:d.a.bool,isSelected:d.a.func,browserProps:d.a.shape({createFiles:d.a.func,moveFolder:d.a.func,moveFile:d.a.func}),messages:d.a.object};var ve,we=Object(g.DropTarget)(["file","folder",y.NativeTypes.FILE],ce.targetSource,ce.targetCollect)(le=function(e){de(n,e);var t=he(n);function n(){return fe(this,n),t.apply(this,arguments)}return n}(ge))||le,Fe=n(2);function Oe(e){if(e>1024){var t=e/1024;return t>1024?"".concat(function(e,t){if(e=parseFloat(e),isNaN(e))return parseFloat("0").toFixed(t);var n=Math.pow(10,t);return(e=(Math.round(e*n)/n).toFixed(t)).toString()}(t/1024,2)," MB"):"".concat(Math.round(t)," kB")}return"".concat(e," B")}function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_e(e);if(t){var o=_e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ne=function(e){Ee(i,e);var t,n,r,o=ke(i);function i(){return Se(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t=this,n=this.props,r=n.thumbnail_url,o=n.action,i=n.url,a=n.isDragging,l=n.isRenaming,c=n.isSelected,s=n.isSelectable,u=n.isOver,f=n.isDeleting,p=n.showName,d=n.showSize,m=n.showModified,y=n.browserProps,b=n.connectDragPreview,g=n.messages;e=r?h.a.createElement("div",{className:"image",style:{backgroundImage:"url("+r+")"}}):y.icons[this.getFileType()]||y.icons.File;var v,w,F,O=a||o,D=y.confirmDeletionRenderer;if(p&&(v=!O&&f&&1===y.selection.length?h.a.createElement(D,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:i,messages:g},this.getName()):!O&&l?h.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},h.a.createElement("input",{ref:function(e){t.newNameRef=e},type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):h.a.createElement("a",{href:i,download:"download",onClick:this.handleFileClick},this.getName())),d&&(l||f||(w=h.a.createElement("span",{className:"size"},h.a.createElement("small",null,Oe(this.props.size))))),m&&!l&&!f){var P=this.props.locale?{addSuffix:!0,locale:this.props.locale}:{addSuffix:!0};F=h.a.createElement("span",{className:"modified"},g.last_modified,": ",Object(Fe.formatDistanceToNow)(this.props.modified,P))}var S={};s&&(S={onClick:this.handleItemClick});var R=h.a.createElement("li",Pe({className:I()("file",{pending:o,dragging:a,dragover:u,selected:c}),onDoubleClick:this.handleItemDoubleClick},S),h.a.createElement("div",{className:"item"},h.a.createElement("span",{className:"thumb"},e),h.a.createElement("span",{className:"name"},v),w,F));return"function"==typeof y.moveFile&&(R=b(R)),this.connectDND(R)}}])&&Re(t.prototype,n),r&&Re(t,r),i}(se);Ne.defaultProps={showName:!0,showSize:!0,showModified:!0,isSelectable:!0};var Ae=Object(g.DragSource)("file",ce.dragSource,ce.dragCollect)(ve=Object(g.DropTarget)(["file","folder",y.NativeTypes.FILE],ce.targetSource,ce.targetCollect)(ve=function(e){Ee(n,e);var t=ke(n);function n(){return Se(this,n),t.apply(this,arguments)}return n}(Ne))||ve)||ve;function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qe(e);if(t){var o=qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Le(this,n)}}function Le(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze,We=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(i,e);var t,n,r,o=Be(i);function i(){return Me(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return h.a.createElement(Ae,xe({},this.props,{showName:!1,showSize:!1,showModified:!1,isSelectable:!1}))}}])&&Ke(t.prototype,n),r&&Ke(t,r),i}(h.a.Component);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qe(e);if(t){var o=Qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Je(this,n)}}function Je(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xe=function(e){$e(i,e);var t,n,r,o=Ye(i);function i(){return Ge(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t=this,n=this.props,r=n.isDragging,o=n.isDeleting,i=n.isRenaming,a=n.isOver,l=n.isSelected,c=n.action,s=n.url,u=n.browserProps,f=n.connectDragPreview,p=n.depth,d=n.size,m=n.modified,y=n.messages,b=u.icons[this.getFileType()]||u.icons.File,g=r||c,v=u.confirmDeletionRenderer;e=!g&&o&&1===u.selection.length?h.a.createElement(v,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:s,messages:y},b,this.getName()):!g&&i?h.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},b,h.a.createElement("input",{ref:function(e){t.newNameRef=e},type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):h.a.createElement("a",{href:s||"#",download:"download",onClick:this.handleFileClick},b,this.getName());var w=h.a.createElement("div",null,e);"function"==typeof u.moveFile&&(w=f(w));var F=this.props.locale?{addSuffix:!0,locale:this.props.locale}:{addSuffix:!0},O=h.a.createElement("tr",{className:I()("file",{pending:c,dragging:r,dragover:a,selected:l}),onClick:this.handleItemClick,onDoubleClick:this.handleItemDoubleClick},h.a.createElement("td",{className:"name"},h.a.createElement("div",{style:{paddingLeft:16*p+"px"}},w)),h.a.createElement("td",{className:"size"},Oe(d)),h.a.createElement("td",{className:"modified"},void 0===m?"-":Object(Fe.formatDistanceToNow)(m,F)));return this.connectDND(O)}}])&&Ve(t.prototype,n),r&&Ve(t,r),i}(se),Ze=Object(g.DragSource)("file",ce.dragSource,ce.dragCollect)(ze=Object(g.DropTarget)(["file","folder",y.NativeTypes.FILE],ce.targetSource,ce.targetCollect)(ze=function(e){$e(n,e);var t=Ye(n);function n(){return Ge(this,n),t.apply(this,arguments)}return n}(Xe))||ze)||ze;function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=at(e);if(t){var o=at(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return it(this,n)}}function it(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(i,e);var t,n,r,o=ot(i);function i(){var e;tt(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={newName:e.props.isDraft?"New folder":e.getName()},e.selectAllNewName=function(){window.requestAnimationFrame((function(){var t=e.newNameRef.value;e.newNameRef.setSelectionRange(0,t.length),e.newNameRef.focus()}))},e.handleFolderClick=function(t){t.stopPropagation(),e.props.browserProps.select(e.props.fileKey,"folder",t.ctrlKey||t.metaKey,t.shiftKey)},e.handleFolderDoubleClick=function(t){t.stopPropagation(),e.toggleFolder()},e.handleRenameClick=function(t){e.props.browserProps.renameFolder&&e.props.browserProps.beginAction("rename",e.props.fileKey)},e.handleNewNameChange=function(t){var n=e.newNameRef.value;e.setState({newName:n})},e.handleRenameSubmit=function(t){if(t.preventDefault(),e.props.browserProps.renameFolder||e.props.isDraft){var n=e.state.newName.trim();if(0!==n.length){if(!["/","\\"].some((function(e){return-1!==n.indexOf(e)}))){var r=e.props.fileKey.substr(0,e.props.fileKey.substr(0,e.props.fileKey.length-1).lastIndexOf("/"));r.length&&(r+="/"),r+=n,r+="/",e.props.isDraft?e.props.browserProps.createFolder(r):e.props.browserProps.renameFolder(e.props.fileKey,r)}}}},e.handleDeleteClick=function(t){e.props.browserProps.deleteFolder&&e.props.browserProps.beginAction("delete",e.props.fileKey)},e.handleDeleteSubmit=function(t){t.preventDefault(),e.props.browserProps.deleteFolder&&e.props.browserProps.deleteFolder(e.props.browserProps.actionTargets)},e.handleCancelEdit=function(t){e.props.browserProps.endAction()},e.toggleFolder=function(){e.props.browserProps.toggleFolder(e.props.fileKey)},e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.isDraft&&this.selectAllNewName()}},{key:"componentDidUpdate",value:function(e,t){!e.isRenaming&&this.props.isRenaming&&this.selectAllNewName()}},{key:"getName",value:function(){if(this.props.name)return this.props.name;var e=this.props.fileKey.split("/");return this.props.newName||e[e.length-2]}},{key:"connectDND",value:function(e){var t=this.props.isDragging||this.props.action;return this.props.keyDerived&&("function"!=typeof this.props.browserProps.moveFolder||t||this.props.isRenaming||this.props.isDeleting||(e=this.props.connectDragSource(e)),"function"!=typeof this.props.browserProps.createFiles&&"function"!=typeof this.props.browserProps.moveFolder&&"function"!=typeof this.props.browserProps.moveFile||(e=this.props.connectDropTarget(e))),e}}])&&nt(t.prototype,n),r&&nt(t,r),i}(h.a.Component);lt.propTypes={name:d.a.string,fileKey:d.a.string,newName:d.a.string,keyDerived:d.a.bool,isDraft:d.a.bool,isRenaming:d.a.bool,isDeleting:d.a.bool,connectDragSource:d.a.func,connectDropTarget:d.a.func,isDragging:d.a.bool,action:d.a.string,browserProps:d.a.shape({select:d.a.func,toggleFolder:d.a.func,beginAction:d.a.func,endAction:d.a.func,preview:d.a.func,createFiles:d.a.func,createFolder:d.a.func,moveFile:d.a.func,moveFolder:d.a.func,renameFolder:d.a.func,deleteFolder:d.a.func,messages:d.a.object})};var ct,st={dragSource:{beginDrag:function(e){return e.browserProps.selection.length||e.browserProps.select(e.fileKey,"folder"),{key:e.fileKey}},endDrag:function(e,t,n){L(e,t)}},dragCollect:function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}}},ut=lt;function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(){return(pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ot(e);if(t){var o=Ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ft(this,n)}}function Ft(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dt,Pt=function(e){gt(i,e);var t,n,r,o=wt(i);function i(){return yt(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t,n=this,r=this.props,o=r.isOpen,i=r.isDragging,a=r.isDeleting,l=r.isRenaming,c=r.isDraft,s=r.isOver,u=r.isSelected,f=r.url,p=r.action,d=r.browserProps,m=r.depth,y=r.keyDerived,b=r.connectDragPreview,g=r.messages,v=d.icons[o?"FolderOpen":"Folder"],w=i||p,F=d.confirmDeletionRenderer;if(e=!w&&a&&1===d.selection.length?h.a.createElement(F,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:f,messages:g},this.getName()):!w&&l||c?h.a.createElement("div",null,h.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},h.a.createElement("input",{type:"text",ref:function(e){n.newNameRef=e},value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):h.a.createElement("div",null,h.a.createElement("a",{onClick:this.toggleFolder},this.getName())),o&&d.nestChildren){t=[];for(var O=0;O<t.length;O++){var D=t[O],P=mt(mt({},d.getItemProps(D,d)),{},{depth:m+1});B(D)?t.push(h.a.createElement(d.folderRenderer,pt({},D,P,{browserProps:d},d.folderRendererProps))):t.push(h.a.createElement(d.fileRenderer,pt({},D,P,{browserProps:d},d.fileRendererProps)))}t=t.length?h.a.createElement("ul",{style:{padding:"0 8px",paddingLeft:"16px"}},t):h.a.createElement("p",null,g.no_items_in_folder)}var S=h.a.createElement("li",{className:I()("folder",{expanded:o&&d.nestChildren,pending:p,dragging:i,dragover:s,selected:u}),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},h.a.createElement("div",{className:"item"},h.a.createElement("span",{className:"thumb"},v),h.a.createElement("span",{className:"name"},e)),t);return"function"==typeof d.moveFolder&&y&&(S=b(S)),this.connectDND(S)}}])&&bt(t.prototype,n),r&&bt(t,r),i}(ut),St=Object(g.DragSource)("folder",st.dragSource,st.dragCollect)(ct=Object(g.DropTarget)(["file","folder",y.NativeTypes.FILE],ce.targetSource,ce.targetCollect)(ct=function(e){gt(n,e);var t=wt(n);function n(){return yt(this,n),t.apply(this,arguments)}return n}(Pt))||ct)||ct;function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=At(e);if(t){var o=At(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nt(this,n)}}function Nt(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tt=function(e){kt(i,e);var t,n,r,o=_t(i);function i(){return Et(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e,t=this,n=this.props,r=n.isOpen,o=n.isDragging,i=n.isDeleting,a=n.isRenaming,l=n.isDraft,c=n.isOver,s=n.isSelected,u=n.action,f=n.url,p=n.browserProps,d=n.connectDragPreview,m=n.depth,y=n.messages,b=p.icons[r?"FolderOpen":"Folder"],g=o||u,v=p.confirmDeletionRenderer;e=!g&&i&&1===p.selection.length?h.a.createElement(v,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:f,messages:y},b,this.getName()):!g&&a||l?h.a.createElement("div",null,h.a.createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},b,h.a.createElement("input",{type:"text",ref:function(e){t.newNameRef=e},value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):h.a.createElement("div",null,h.a.createElement("a",{onClick:this.toggleFolder},b,this.getName()));var w=h.a.createElement("div",null,e);"function"==typeof p.moveFile&&(w=d(w));var F=h.a.createElement("tr",{className:I()("folder",{pending:u,dragging:o,dragover:c,selected:s}),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},h.a.createElement("td",{className:"name"},h.a.createElement("div",{style:{paddingLeft:16*m+"px"}},w)),h.a.createElement("td",null),h.a.createElement("td",null));return this.connectDND(F)}}])&&jt(t.prototype,n),r&&jt(t,r),i}(ut),xt=Object(g.DragSource)("folder",st.dragSource,st.dragCollect)(Dt=Object(g.DropTarget)(["file","folder",y.NativeTypes.FILE],ce.targetSource,ce.targetCollect)(Dt=function(e){kt(n,e);var t=_t(n);function n(){return Et(this,n),t.apply(this,arguments)}return n}(Tt))||Dt)||Dt,Mt=function(e){var t=e.children,n=e.handleDeleteSubmit,r=e.handleFileClick,o=e.url,i=e.messages;return h.a.createElement("form",{className:"deleting",onSubmit:n},h.a.createElement("a",{href:o,download:"download",onClick:r},t),h.a.createElement("div",null,h.a.createElement("button",{type:"submit"},i.confirm_deletion)))};Mt.propTypes={children:d.a.node,handleDeleteSubmit:d.a.func,handleFileClick:d.a.func,url:d.a.string,messages:d.a.object},Mt.defaultProps={url:"#"};var Kt=Mt,It=function(e){var t=e.handleDeleteSubmit,n=e.messages;return h.a.createElement("button",{className:"deleting",onClick:t},n.confirm_deletion)};It.propTypes={handleDeleteSubmit:d.a.func,messages:d.a.object};var Bt=It;function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wt=function(e,t){var n={contents:[],children:{}};return e.map((function(e){e.relativeKey=(e.newKey||e.key).substr(t.length);var r=n,o=e.relativeKey.split("/");o.map((function(t,n){if(n===o.length-1&&B(e))for(var i in e)r[i]=e[i];""!==t&&(!B(e)&&n===o.length-1?r.contents.push(qt(qt({},e),{},{keyDerived:!0})):(t in r.children==!1&&(r.children[t]={contents:[],children:{}}),r=r.children[t]))}))})),e=function e(n,r){""!==r&&(r+="/");var o=[];for(var i in n.children)o.push(qt(qt({},n.children[i]),{},{contents:void 0,keyDerived:!0,key:t+r+i+"/",relativeKey:r+i+"/",children:e(n.children[i],r+i),size:0}));return o=o.concat(n.contents)}(n,"")};function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){Vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $t=function(e,t){for(var n,r,o=(n=[],r=new Date,n.push({name:"Today",begins:Object(Fe.startOfToday)(),ends:Object(Fe.endOfToday)(),items:[]}),n.push({name:"Yesterday",begins:Object(Fe.startOfYesterday)(),ends:Object(Fe.endOfYesterday)(),items:[]}),n.push({name:"Earlier this Week",begins:Object(Fe.startOfWeek)(r),ends:Object(Fe.endOfWeek)(r),items:[]}),n.push({name:"Last Week",begins:Object(Fe.startOfWeek)(Object(Fe.addWeeks)(r,-1)),ends:Object(Fe.endOfWeek)(Object(Fe.addWeeks)(r,-1)),items:[]}),Object(Fe.getMonth)(n[n.length-1].begins)===Object(Fe.getMonth)(r)&&n.push({name:"Earlier this Month",begins:Object(Fe.startOfMonth)(r),ends:Object(Fe.endOfMonth)(r),items:[]}),n),i=0;i<e.length;i++){var a=e[i];if(!B(a)){for(var l=Gt(Gt({},a),{},{keyDerived:!0}),c=!1,s=+l.modified,u=0;u<o.length;u++){var f=o[u];if(s>+f.begins&&s<=+f.ends){f.items.push(l),c=!0;break}}if(!c){var p={name:Object(Fe.format)(l.modified,"MMMM yyyy"),begins:Object(Fe.startOfMonth)(l.modified),ends:Object(Fe.endOfMonth)(l.modified),items:[]};p.items.push(l),o.push(p)}}}for(var d=[],m=0;m<o.length;m++){var h=o[m];h.items.length&&d.push({key:"".concat(h.name.toLowerCase().replace(" ","_"),"/"),name:h.name,children:h.items,size:0})}return d},Ht=/(-?\d*\.?\d+)/g;function Yt(e,t){for(var n=String(e.name).split(Ht),r=String(t.name).split(Ht),o=Math.min(n.length,r.length),i=0;i<o;i++){var a=parseFloat(n[i])||n[i].toLowerCase(),l=parseFloat(r[i])||r[i].toLowerCase();if(a<l)return-1;if(a>l)return 1}return 0}function Jt(e,t){return e.draft&&!t.draft?1:t.draft&&!e.draft?-1:Yt(e,t)}var Qt=function(e){return function e(t){for(var n=[],r=[],o=0;o<t.length;o++){var i=t[o],a=(i.newKey||i.key).split("/");i.children?(i.name||(i.name=a[a.length-2]),n.push(i)):(i.name||(i.name=a[a.length-1]),r.push(i))}r=r.sort(Yt),n=n.sort(Jt);for(var l=0;l<n.length;l++){var c=n[l];c.children=e(c.children)}var s=[];return s=(s=s.concat(n)).concat(r)}(e)};var Xt=function(e){return function e(t){for(var n=[],r=[],o=0;o<t.length;o++){var i=t[o],a=(i.newKey||i.key).split("/");i.children?n.push(i):(i.name=a[a.length-1],r.push(i))}r=r.sort(Fe.compareAsc);for(var l=0;l<n.length;l++){var c=n[l];c.children=e(c.children)}var s=[];return s=(s=s.concat(n)).concat(r)}(e)};function Zt(e){return function(e){if(Array.isArray(e))return en(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tn=function(e){var t=e.selectedItems,n=e.isFolder,r=e.icons,o=e.nameFilter,i=e.canCreateFolder,a=e.onCreateFolder,l=e.canRenameFile,c=e.onRenameFile,s=e.canRenameFolder,u=e.onRenameFolder,f=e.canDeleteFile,p=e.onDeleteFile,d=e.canDeleteFolder,m=e.onDeleteFolder,y=e.canDownloadFile,b=e.onDownloadFile,g=e.messages,v=[];if(t.length){var w=t.filter((function(e){return e.action}));if(w.length===t.length&&1===Zt(new Set(w)).length){var F;switch(w[0].action){case"delete":F="".concat(g.deleting);break;case"rename":F="".concat(g.renaming);break;default:F="".concat(g.moving)}v=h.a.createElement("div",{className:"item-actions"},r.Loading," ",F)}else{n&&i&&!o&&v.push(h.a.createElement("li",{key:"action-add-folder"},h.a.createElement("a",{onClick:a,href:"#",role:"button"},r.Folder," ",g.add_subfolder)));var O=t.find((function(e){return!e.keyDerived}));O||n||!l||1!==t.length?!O&&n&&s&&v.push(h.a.createElement("li",{key:"action-rename"},h.a.createElement("a",{onClick:u,href:"#",role:"button"},r.Rename," ",g.rename))):v.push(h.a.createElement("li",{key:"action-rename"},h.a.createElement("a",{onClick:c,href:"#",role:"button"},r.Rename," ",g.rename))),O||n||!f?!O&&n&&d&&v.push(h.a.createElement("li",{key:"action-delete"},h.a.createElement("a",{onClick:m,href:"#",role:"button"},r.Delete," ",g.delete))):v.push(h.a.createElement("li",{key:"action-delete"},h.a.createElement("a",{onClick:p,href:"#",role:"button"},r.Delete," ",g.delete))),!n&&y&&v.push(h.a.createElement("li",{key:"action-download"},h.a.createElement("a",{onClick:b,href:"#",role:"button"},r.Download," ",g.download))),v=v.length?h.a.createElement("ul",{className:"item-actions"},v):h.a.createElement("div",{className:"item-actions"}," ")}}else i&&!o&&v.push(h.a.createElement("li",{key:"action-add-folder"},h.a.createElement("a",{onClick:a,href:"#",role:"button"},r.Folder," ",g.add_folder))),v=v.length?h.a.createElement("ul",{className:"item-actions"},v):h.a.createElement("div",{className:"item-actions"}," ");return v};tn.propTypes={selectedItems:d.a.arrayOf(d.a.object),isFolder:d.a.bool,icons:d.a.object,nameFilter:d.a.string,canCreateFolder:d.a.bool,onCreateFolder:d.a.func,canRenameFile:d.a.bool,onRenameFile:d.a.func,canRenameFolder:d.a.bool,onRenameFolder:d.a.func,canDeleteFile:d.a.bool,onDeleteFile:d.a.func,canDeleteFolder:d.a.bool,onDeleteFolder:d.a.func,canDownloadFile:d.a.bool,onDownloadFile:d.a.func,messages:d.a.object},tn.defaultProps={selectedItems:[],isFolder:!1,icons:{},nameFilter:"",canCreateFolder:!1,onCreateFolder:null,canRenameFile:!1,onRenameFile:null,canRenameFolder:!1,onRenameFolder:null,canDeleteFile:!1,onDeleteFile:null,canDeleteFolder:!1,onDeleteFolder:null,canDownloadFile:!1,onDownloadFile:null};var nn,rn=tn;function on(e){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function an(){return(an=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ln(e){return function(e){if(Array.isArray(e))return cn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){fn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function dn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){pn(i,r,o,a,l,"next",e)}function l(e){pn(i,r,o,a,l,"throw",e)}a(void 0)}))}}function mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bn(e,t)}function bn(e,t){return(bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fn(e);if(t){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vn(this,n)}}function vn(e,t){return!t||"object"!==on(t)&&"function"!=typeof t?wn(e):t}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fn(e){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var On=/.*\/__new__[/]?$/gm;function Dn(e,t){return{key:"file-".concat(e.key),fileKey:e.key,isSelected:t.selection.includes(e.key),isOpen:e.key in t.openFolders||t.nameFilter,isRenaming:"rename"===t.activeAction&&t.actionTargets.includes(e.key),isDeleting:"delete"===t.activeAction&&t.actionTargets.includes(e.key),isDraft:!!e.draft}}var Pn=function(e){yn(a,e);var t,r,o,i=gn(a);function a(){var e;mn(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=i.call.apply(i,[this].concat(r))).state={openFolders:{},selection:[],activeAction:null,actionTargets:[],nameFilter:"",searchResultsShown:20,previewFile:null,addFolder:null,locale:null},e.getLocale=function(){var e=dn(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.includes("-")?t.replace(/\-/g,""):t,e.next=3,Promise.resolve().then(n.t.bind(null,7,7));case 3:return r=e.sent,e.abrupt("return",r[t]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.getFile=function(t){return e.props.files.find((function(e){return e.key===t}))},e.createFiles=function(t,n){e.setState((function(e){var t={selection:[]};return n&&(t.openFolders=un(un({},e.openFolders),{},fn({},n,!0))),t}),(function(){e.props.onCreateFiles(t,n)}))},e.createFolder=function(t){e.setState({activeAction:null,actionTargets:[],selection:[t]},(function(){e.props.onCreateFolder(t)}))},e.moveFile=function(t,n){e.setState({activeAction:null,actionTargets:[],selection:[n]},(function(){e.props.onMoveFile(t,n)}))},e.moveFolder=function(t,n){e.setState((function(e){var r={activeAction:null,actionTargets:[],selection:[n]};return t in e.openFolders&&(r.openFolders=un(un({},e.openFolders),{},fn({},n,!0))),r}),(function(){e.props.onMoveFolder(t,n)}))},e.renameFile=function(t,n){e.setState({activeAction:null,actionTargets:[],selection:[n]},(function(){e.props.onRenameFile(t,n)}))},e.renameFolder=function(t,n){e.setState((function(e){var r={activeAction:null,actionTargets:[]};return e.selection[0].substr(0,t.length)===t&&(r.selection=[e.selection[0].replace(t,n)]),t in e.openFolders&&(r.openFolders=un(un({},e.openFolders),{},fn({},n,!0))),r}),(function(){e.props.onRenameFolder(t,n)}))},e.deleteFile=function(t){e.setState({activeAction:null,actionTargets:[],selection:[]},(function(){e.props.onDeleteFile(t)}))},e.deleteFolder=function(t){e.setState((function(e){var n={activeAction:null,actionTargets:[],selection:[]};return t in e.openFolders&&(n.openFolders=un({},e.openFolders),delete n.openFolders[t]),n}),(function(){e.props.onDeleteFolder(t)}))},e.downloadFile=function(t){e.setState({activeAction:null,actionTargets:[]},(function(){e.props.onDownloadFile(t)}))},e.beginAction=function(t,n){e.setState({activeAction:t,actionTargets:n||[]})},e.endAction=function(){e.state.selection&&e.state.selection.length>0&&e.state.selection.filter((function(e){return e.match(On)})).length>0&&e.setState({selection:[]}),e.beginAction(null,null)},e.select=function(t,n,r,o){var i=e.state.actionTargets,a=i.length&&!i.includes(t),l=e.getFile(t),c=[t];if(r||o){var s=e.state.selection.indexOf(t);c=-1!==s?[].concat(ln(e.state.selection.slice(0,s)),ln(e.state.selection.slice(s+1))):[].concat(ln(e.state.selection),[t])}e.setState((function(e){return{selection:c,actionTargets:a?[]:i,activeAction:a?null:e.activeAction}}),(function(){e.props.onSelect(l),"file"===n&&e.props.onSelectFile(l),"folder"===n&&e.props.onSelectFolder(l)}))},e.preview=function(t){e.state.previewFile&&e.state.previewFile.key!==t.key&&e.closeDetail(),e.setState({previewFile:t},(function(){e.props.onPreviewOpen(t)}))},e.closeDetail=function(){e.setState({previewFile:null},(function(){e.props.onPreviewClose(e.state.previewFile)}))},e.handleShowMoreClick=function(t){t.preventDefault(),e.setState((function(e){return{searchResultsShown:e.searchResultsShown+20}}))},e.toggleFolder=function(t){var n=t in e.state.openFolders;e.setState((function(e){var r={openFolders:un({},e.openFolders)};return n?delete r.openFolders[t]:r.openFolders[t]=!0,r}),(function(){var r=n?"onFolderClose":"onFolderOpen";e.props[r](e.getFile(t))}))},e.openFolder=function(t){e.setState((function(e){return{openFolders:un(un({},e.openFolders),{},fn({},t,!0))}}),(function(){e.props.onFolderOpen(e.getFile(t))}))},e.handleGlobalClick=function(t){var n=!(!e.browserRef||!e.browserRef.contains(t.target)),r=!(!e.previewRef||!e.previewRef.contains(t.target));n||r||e.setState({selection:[],actionTargets:[],activeAction:null})},e.handleActionBarRenameClick=function(t){t.preventDefault(),e.beginAction("rename",e.state.selection)},e.handleActionBarDeleteClick=function(t){t.preventDefault(),e.beginAction("delete",e.state.selection)},e.handleActionBarAddFolderClick=function(t){t.preventDefault(),"createFolder"!==e.state.activeAction&&e.setState((function(t){var n="";t.selection&&t.selection.length>0&&"/"!==(n+=t.selection).substr(n.length-1,n.length)&&(n+="/"),"__new__/"===n||n.endsWith("/__new__/")||(n+="__new__/");var r={actionTargets:[n],activeAction:"createFolder",selection:[n]};return t.selection&&t.selection.length>0&&(r.openFolders=un(un({},t.openFolders),{},fn({},e.state.selection,!0))),r}))},e.handleActionBarDownloadClick=function(t){t.preventDefault(),e.downloadFile(e.state.selection)},e.updateFilter=function(t){e.setState({nameFilter:t,searchResultsShown:20})},e.handleMultipleDeleteSubmit=function(){console.log(wn(e)),e.deleteFolder(e.state.selection.filter((function(e){return"/"===e[e.length-1]}))),e.deleteFile(e.state.selection.filter((function(e){return"/"!==e[e.length-1]})))},e}return t=a,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.i18n;"table"===this.props.renderStyle&&this.props.nestChildren&&console.warn("Invalid settings: Cannot nest table children in file browser"),window.addEventListener("click",this.handleGlobalClick),this.getLocale(t.language).then((function(t){e.setState({locale:t})}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.i18n;e.i18n.language!==n.language&&this.getLocale(n.language).then((function(e){t.setState({locale:e})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleGlobalClick)}},{key:"getBrowserProps",value:function(){return{nestChildren:this.props.nestChildren,fileRenderer:this.props.fileRenderer,fileRendererProps:this.props.fileRendererProps,folderRenderer:this.props.folderRenderer,folderRendererProps:this.props.folderRendererProps,confirmDeletionRenderer:this.props.confirmDeletionRenderer,confirmMultipleDeletionRenderer:this.props.confirmMultipleDeletionRenderer,icons:this.props.icons,openFolders:this.state.openFolders,nameFilter:this.state.nameFilter,selection:this.state.selection,activeAction:this.state.activeAction,actionTargets:this.state.actionTargets,select:this.select,openFolder:this.openFolder,toggleFolder:this.toggleFolder,beginAction:this.beginAction,endAction:this.endAction,preview:this.preview,createFiles:this.props.onCreateFiles?this.createFiles:void 0,createFolder:this.props.onCreateFolder?this.createFolder:void 0,renameFile:this.props.onRenameFile?this.renameFile:void 0,renameFolder:this.props.onRenameFolder?this.renameFolder:void 0,moveFile:this.props.onMoveFile?this.moveFile:void 0,moveFolder:this.props.onMoveFolder?this.moveFolder:void 0,deleteFile:this.props.onDeleteFile?this.deleteFile:void 0,deleteFolder:this.props.onDeleteFolder?this.deleteFolder:void 0,getItemProps:Dn}}},{key:"renderActionBar",value:function(e){var t,n=this.props,r=n.icons,o=n.canFilter,i=n.filterRendererProps,a=n.filterRenderer,l=n.actionRenderer,c=n.onCreateFolder,s=n.onRenameFile,u=n.onRenameFolder,f=n.onDeleteFile,p=n.onDeleteFolder,d=n.onDownloadFile,m=n.i18n,y=this.getBrowserProps(),b=1===e.length&&!e[0].size;o&&(t=h.a.createElement(a,an({value:this.state.nameFilter,updateFilter:this.updateFilter},i,{messages:m.messages})));var g=h.a.createElement(l,{browserProps:y,selectedItems:e,isFolder:b,icons:r,nameFilter:this.state.nameFilter,canCreateFolder:"function"==typeof c,onCreateFolder:this.handleActionBarAddFolderClick,canRenameFile:"function"==typeof s,onRenameFile:this.handleActionBarRenameClick,canRenameFolder:"function"==typeof u,onRenameFolder:this.handleActionBarRenameClick,canDeleteFile:"function"==typeof f,onDeleteFile:this.handleActionBarDeleteClick,canDeleteFolder:"function"==typeof p,onDeleteFolder:this.handleActionBarDeleteClick,canDownloadFile:"function"==typeof d,onDownloadFile:this.handleActionBarDownloadClick,messages:m.messages});return h.a.createElement("div",{className:"action-bar"},t,g)}},{key:"renderFiles",value:function(e,t){var n=this,r=this.props,o=r.fileRenderer,i=r.fileRendererProps,a=r.folderRenderer,l=r.folderRendererProps,c=r.i18n,s=this.state.locale,u=this.getBrowserProps(),f=[];return e.map((function(e){var r=un(un({},u.getItemProps(e,u)),{},{depth:n.state.nameFilter?0:t});B(e)?(!n.props.showFoldersOnFilter&&n.state.nameFilter||f.push(h.a.createElement(a,an({},e,r,{browserProps:u},l,{messages:c.messages,locale:s}))),(n.state.nameFilter||r.isOpen&&!u.nestChildren)&&(f=f.concat(n.renderFiles(e.children,t+1)))):f.push(h.a.createElement(o,an({},e,r,{browserProps:u},i,{messages:c.messages,locale:s})))})),f}},{key:"render",value:function(){var e,t=this,n=this.state.selection,r=this.props.i18n,o={browserProps:this.getBrowserProps(),fileKey:"",fileCount:this.props.files.length},i=this.props.files.concat([]);if("createFolder"===this.state.activeAction&&i.push({key:this.state.actionTargets[0],size:0,draft:!0}),this.state.nameFilter){var a=[],l=this.state.nameFilter.toLowerCase().split(" ");i.map((function(e){var t=!1;l.map((function(n){-1===e.key.toLowerCase().trim().indexOf(n)&&(t=!0)})),t||a.push(e)})),i=a}if("function"==typeof this.props.group)i=this.props.group(i,"");else{var c=[];i.map((function(e){B(e)||c.push(e)})),i=c}var s,u=[];i.map((function e(t){n.includes(t.key)&&u.push(t),t.children&&t.children.map(e)})),"function"==typeof this.props.sort&&(i=this.props.sort(i));var f=this.renderFiles(i,0);switch(this.props.renderStyle){case"table":f.length?this.state.nameFilter&&f.length>(f=f.slice(0,this.state.searchResultsShown)).length&&f.push(h.a.createElement("tr",{key:"show-more"},h.a.createElement("td",{colSpan:100},h.a.createElement("a",{onClick:this.handleShowMoreClick,href:"#"},r.messages.show_more_results)))):f=this.state.nameFilter?h.a.createElement("tr",null,h.a.createElement("td",{colSpan:100},r.messages.no_files_matching,' "',this.state.nameFilter,'".')):h.a.createElement("tr",null,h.a.createElement("td",{colSpan:100},r.messages.no_files)),this.props.headerRenderer&&(s=h.a.createElement("thead",null,h.a.createElement(this.props.headerRenderer,an({},o,this.props.headerRendererProps,{messages:r.messages})))),e=h.a.createElement("table",{cellSpacing:"0",cellPadding:"0"},s,h.a.createElement("tbody",null,f));break;case"list":var p;if(f.length)this.state.nameFilter&&f.length>(f=f.slice(0,this.state.searchResultsShown)).length&&(p=h.a.createElement("a",{onClick:this.handleShowMoreClick,href:"#"},r.messages.show_more_results)),f=h.a.createElement("div",null,h.a.createElement("ul",null,f),p);else f=this.state.nameFilter?h.a.createElement("p",{className:"empty"},r.messages.no_files_matching,' "',this.state.nameFilter,'"'):h.a.createElement("p",{className:"empty"},r.messages.no_files);this.props.headerRenderer&&(s=h.a.createElement(this.props.headerRenderer,an({},o,this.props.headerRendererProps,{messages:r.messages}))),e=h.a.createElement("div",null,s,f)}var d=this.props.confirmMultipleDeletionRenderer;return h.a.createElement("div",{className:"rendered-react-keyed-file-browser"},this.props.actions,h.a.createElement("div",{className:"rendered-file-browser",ref:function(e){t.browserRef=e}},this.props.showActionBar&&this.renderActionBar(u),"delete"===this.state.activeAction&&this.state.selection.length>1&&h.a.createElement(d,{handleDeleteSubmit:this.handleMultipleDeleteSubmit,messages:r.messages}),h.a.createElement("div",{className:"files"},e)),null!==this.state.previewFile&&h.a.createElement(this.props.detailRenderer,an({file:this.state.previewFile,close:this.closeDetail},this.props.detailRendererProps,{messages:r.messages})))}}])&&hn(t.prototype,r),o&&hn(t,o),a}(h.a.Component);Pn.propTypes={files:d.a.arrayOf(d.a.shape({key:d.a.string.isRequired,modified:d.a.number,size:d.a.number})).isRequired,actions:d.a.node,showActionBar:d.a.bool.isRequired,canFilter:d.a.bool.isRequired,showFoldersOnFilter:d.a.bool,group:d.a.func.isRequired,sort:d.a.func.isRequired,icons:d.a.shape({Folder:d.a.element,FolderOpen:d.a.element,File:d.a.element,PDF:d.a.element,Image:d.a.element,Delete:d.a.element,Rename:d.a.element,Loading:d.a.element,Download:d.a.element}),nestChildren:d.a.bool.isRequired,renderStyle:d.a.oneOf(["list","table"]).isRequired,startOpen:d.a.bool.isRequired,headerRenderer:d.a.func,headerRendererProps:d.a.object,filterRenderer:d.a.func,filterRendererProps:d.a.object,fileRenderer:d.a.func,fileRendererProps:d.a.object,folderRenderer:d.a.func,folderRendererProps:d.a.object,detailRenderer:d.a.func,detailRendererProps:d.a.object,actionRenderer:d.a.func,confirmDeletionRenderer:d.a.func,confirmMultipleDeletionRenderer:d.a.func,onCreateFiles:d.a.oneOfType([d.a.func,d.a.bool]),onCreateFolder:d.a.oneOfType([d.a.func,d.a.bool]),onMoveFile:d.a.oneOfType([d.a.func,d.a.bool]),onMoveFolder:d.a.oneOfType([d.a.func,d.a.bool]),onRenameFile:d.a.oneOfType([d.a.func,d.a.bool]),onRenameFolder:d.a.oneOfType([d.a.func,d.a.bool]),onDeleteFile:d.a.oneOfType([d.a.func,d.a.bool]),onDeleteFolder:d.a.oneOfType([d.a.func,d.a.bool]),onDownloadFile:d.a.oneOfType([d.a.func,d.a.bool]),onSelect:d.a.func,onSelectFile:d.a.func,onSelectFolder:d.a.func,onPreviewOpen:d.a.func,onPreviewClose:d.a.func,onFolderOpen:d.a.func,onFolderClose:d.a.func,i18n:d.a.shape({messages:d.a.object,language:d.a.string})},Pn.defaultProps={showActionBar:!0,canFilter:!0,showFoldersOnFilter:!1,group:Wt,sort:Qt,nestChildren:!1,renderStyle:"table",startOpen:!1,headerRenderer:we,headerRendererProps:{},filterRenderer:M,filterRendererProps:{},fileRenderer:Ze,fileRendererProps:{},folderRenderer:xt,folderRendererProps:{},detailRenderer:E,detailRendererProps:{},actionRenderer:rn,confirmDeletionRenderer:Kt,confirmMultipleDeletionRenderer:Bt,icons:{},i18n:{language:"en",messages:{file:"file",size:"size",last_modified:"Last modified",add_subfolder:"Add Subfolder",add_folder:"Add Folder",rename:"Rename",delete:"Delete",download:"Download",deleting:"Deleting...",renaming:"Renaming...",moving:"Moving...",confirm_deletion:"Confirm Deletion",item_details:"Item details",key:"key",name:"name",close:"Close",filter_files:"Filter files",no_files:"No files",no_items_in_folder:"No items in this folder",no_files_matching:"No files matching",show_more_results:"Show more results"}},onSelect:function(e){},onSelectFile:function(e){},onSelectFolder:function(e){},onPreviewOpen:function(e){},onPreviewClose:function(e){},onFolderOpen:function(e){},onFolderClose:function(e){}};var Sn=Object(g.DragDropContext)(b.a)(nn=function(e){yn(n,e);var t=gn(n);function n(){return mn(this,n),t.apply(this,arguments)}return n}(Pn))||nn,Rn=function(e){var t=4===e?"fa":"fas",n=4===e?["FontAwesome",'"FontAwesome"']:['"Font Awesome 5 Free"','"Font Awesome 5 Pro"'],r=!1,o=document.createElement("span");o.className=t,o.style.display="none",document.body.insertBefore(o,document.body.firstChild);var i,a;return n.includes((i=o,a="font-family",window.getComputedStyle(i,null).getPropertyValue(a)))?r=!0:console.warn("Font Awesome ".concat(e," was not detected but Font Awesome ").concat(e," icons have been requested for `react-object-list`")),document.body.removeChild(o),r},En=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;switch(e){case 4:return Rn(4),{File:h.a.createElement("i",{className:"fa fa-file-o","aria-hidden":"true"}),Image:h.a.createElement("i",{className:"fa fa-file-image-o","aria-hidden":"true"}),Video:h.a.createElement("i",{className:"fa fa-file-video-o","aria-hidden":"true"}),Audio:h.a.createElement("i",{className:"fa fa-file-audio-o","aria-hidden":"true"}),Archive:h.a.createElement("i",{className:"fa fa-file-archive-o","aria-hidden":"true"}),Word:h.a.createElement("i",{className:"fa fa-file-word-o","aria-hidden":"true"}),Excel:h.a.createElement("i",{className:"fa fa-file-excel-o","aria-hidden":"true"}),PowerPoint:h.a.createElement("i",{className:"fa fa-file-powerpoint-o","aria-hidden":"true"}),Text:h.a.createElement("i",{className:"fa fa-file-text-o","aria-hidden":"true"}),PDF:h.a.createElement("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"}),Rename:h.a.createElement("i",{className:"fa fa-i-cursor","aria-hidden":"true"}),Folder:h.a.createElement("i",{className:"fa fa-folder-o","aria-hidden":"true"}),FolderOpen:h.a.createElement("i",{className:"fa fa-folder-open-o","aria-hidden":"true"}),Delete:h.a.createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"}),Loading:h.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin","aria-hidden":"true"}),Download:h.a.createElement("i",{className:"fa fa-download","aria-hidden":"true"})};case 5:return Rn(5),{File:h.a.createElement("i",{className:"far fa-file","aria-hidden":"true"}),Image:h.a.createElement("i",{className:"far fa-file-image","aria-hidden":"true"}),Video:h.a.createElement("i",{className:"far fa-file-video","aria-hidden":"true"}),Audio:h.a.createElement("i",{className:"far fa-file-audio","aria-hidden":"true"}),Archive:h.a.createElement("i",{className:"far fa-file-archive","aria-hidden":"true"}),Word:h.a.createElement("i",{className:"far fa-file-word","aria-hidden":"true"}),Excel:h.a.createElement("i",{className:"far fa-file-excel","aria-hidden":"true"}),PowerPoint:h.a.createElement("i",{className:"far fa-file-powerpoint","aria-hidden":"true"}),Text:h.a.createElement("i",{className:"far fa-file-alt","aria-hidden":"true"}),PDF:h.a.createElement("i",{className:"far fa-file-pdf","aria-hidden":"true"}),Rename:h.a.createElement("i",{className:"far fa-i-cursor","aria-hidden":"true"}),Folder:h.a.createElement("i",{className:"far fa-folder","aria-hidden":"true"}),FolderOpen:h.a.createElement("i",{className:"far fa-folder-open","aria-hidden":"true"}),Delete:h.a.createElement("i",{className:"far fa-trash-alt","aria-hidden":"true"}),Loading:h.a.createElement("i",{className:"fas fa-circle-notch fa-spin","aria-hidden":"true"}),Download:h.a.createElement("i",{className:"fas fa-download","aria-hidden":"true"})};default:console.warn("Could not find config for version ".concat(e),"Accepted versions are: 4, 5","Please make an issue in `react-object-list` to fix this.")}};t.default=Sn},function(e,t){e.exports=require("date-fns/locale")}])}));